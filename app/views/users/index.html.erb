<% provide(:title, 'Users') %>

<div class="page-header">
  <h1>Users</h1>
</div>

<table class="table table-striped">
    <thead>
        <tr>
          <th><%= link_to "Id", users_path(sort: "id")%></th>
          <th><%= link_to "User", users_path(sort: "name")%></th>
          <th><%= link_to "e-mail", users_path(sort: "email")%></th>
          <th><%= link_to "Created at", users_path(sort: "created_at")%></th>
          <th>Actions</th>
        </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= link_to user.id, user_path(user) %></td>
          <td><%= user.name %></td>
          <td><%= user.email %></td>
          <td><%= user.created_at %></td>
          <td>
            <%= link_to "show", user, class: 'btn btn-mini' %>
            <% if current_user.admin? && !current_user?(user) %>
              <%= link_to "edit", edit_user_path(user), class: 'btn btn-mini' %>
              <%= link_to "destroy", user, method: :delete, data: { confirm: "You sure?" }, class: "btn btn-mini btn-danger" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
</table>

<%= link_to "new", new_user_path, class: 'btn btn-primary' %>